FROM node:latest

WORKDIR /home/source
COPY . .


RUN apt update && apt -y install nginx &&  \
    npm install -g pnpm && pnpm install typescript -g && pnpm run build_host

EXPOSE 80

CMD ["nginx", "-g", "daemon off;"]